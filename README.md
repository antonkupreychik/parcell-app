# Возможности пользователей

### 1. Создание пользователя - POST /api/v1/users

```
{
  "name": "Customer",
  "email": "email@emaisl.com",
  "password": "passwo!312JGsnrd",
  "coordinates": {
    "latitude": "60.4501",
    "longitude": "30.5234"
  }
}
```

Здесь мы заполняем координаты, откуда курьеру нужно будет забрать посылку

### 2. Пополнение баланс пользователя - POST /api/v1/users/balance

```
{
  "userId": 1,
  "balance": 100,
  "operationType": "ADD"
}
```

### 3. Создаем посылку - POST /api/v1/parcels

```
{
  "name": "Parcel 1",
  "weight": 10,
  "width": 10,
  "height": 10,
  "length": 10,
  "description": "Parcel 1",
  "address": {
    "country": "Ukraine",
    "city": "Kyiv",
    "street": "Khreshchatyk",
    "houseNumber": "1",
    "apartmentNumber": "1",
    "zipCode": "01001",
    "coordinates": {
      "latitude": "78.4501",
      "longitude": "30.5234"
    }
  }
}
```

Координаты в этом запросе, обозначают куда нужно доставить посылку
В этом же запросе мы получаем предварительную стоимость доставки.
Она измеряется исходя из веса и габаритов посылки, а также расстояния между точками отправления и получения.

### 4. Просмотр информации о посылках пользователя - GET /api/v1/parcels

```
?page=0&size=10&sort=name&direction=ASC&search=parcel \
```

Информация возвращается постранично, по умолчанию 10 записей на странице.
Есть возможность сортировки по любому полю, по возрастанию или убыванию.
Так же есть возможность поиска по имени посылки.

### 5. Просмотр информации о посылке - GET /api/v1/parcels/{id}

Запрос возвращает более подробную информацию о посылке, включая адрес доставки и стоимость доставки.

### 6. Просмотр информации о балансе пользователя - GET /api/v1/users/balance

Запрос возвращает баланс пользователя, а также историю операций по балансу.

//TODO: в дальнейшем можно добавить историю транзакций по посылкам

### 6. Отмены посылки, нужно отправить запрос - POST /api/v1/parcels/{id}/cancel

```
{
  "parcelId": 1
}
```

При отмене посылки, пользователь получает возврат денег на свой баланс.
Если на посылку еще не назначен курьер, возвращается полная сумма.
Если курьер уже назначен, но посылка не передана, возвращается 80% суммы.
Если курьер уже назначен и посылка передана, возвращается 30% суммы.
Настройки для процентов можно найти в таблице `config` в БД.

# Возможности администратора

### 1. Создание курьера - POST /api/v1/users/courier

```
{
  "name": "Customer",
  "email": "email@emaisl.com",
  "password": "passwo!312JGsnrd",
  "coordinates": {
    "latitude": "60.4501",
    "longitude": "30.5234"
  }
}
```

Координаты - это текущее местоположение курьера

### 2. Назначение курьера на посылку - POST /api/v1/parcels/{parcelId}/assign/{courierId}}

```
{
  "parcelId": 1,
  "courierId": 1
}
```

По итогу, для пользователя будет рассчитана окончательная стоимость, с учетом расстояния до пользователя и до посылки, а
также с учетом комиссии сервиса.
